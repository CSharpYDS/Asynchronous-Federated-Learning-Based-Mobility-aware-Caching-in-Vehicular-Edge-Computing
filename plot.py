import numpy as np
import matplotlib.pyplot as plt
from matplotlib.pyplot import MultipleLocator
#ml_1m
cache_size=[50,100,150,200,250,300,350,400,450,500]
MCAF=[10.715722908881862, 17.67461914343202, 23.93791319344639, 29.249784420810578, 34.14486921529175, 38.077033630353554, 41.97470537510779, 45.70566254670882, 48.98246622592699, 51.74475423972405]
MCAF1=[11.139450360262705, 18.03226423515909, 24.0164509341325, 29.51922463814321, 34.040043359051204, 38.33769049289039, 42.26551042530129, 45.85219664604986, 49.00210418924951, 51.95434546961678]
Greedy_cache_efficiency=[10.07444668, 16.78643288, 22.35067548, 27.39149181, 31.94797356, 35.96608221,
 39.78815752, 43.11641276, 46.07157229, 48.88100029]
Greedy_cache_efficiency1=[10.09373207, 16.9664605 , 22.76095135 ,27.64426449 ,32.12618759 ,36.08078811,
 39.70031244, 43.19071606, 46.15571 ,   49.24057897]
TS_cache_efficiency=[ 4.15636677 , 9.99425122 ,14.13912044, 19.4136246,  23.7769474,  27.0480023,
 30.69560218, 34.53003737, 38.51968957, 42.79103191]
TS_cache_efficiency1=[ 4.01071224 , 8.84397118, 15.09915195 ,18.4977364,  24.34164382, 27.12491233,
 30.74666837, 35.48428234, 38.17190589, 41.86380157]
random_cache_efficiency=[ 1.2244898,   2.89450992,  4.7025007,  5.33774073,  7.62288014,  6.5679793,
  9.21816614, 10.3190572,  10.6381144,  11.10376545]
random_cache_efficiency1=[ 1.6004591,   2.09462475,  4.661098 ,   5.11700567,  6.98208251 , 7.44755468,
  7.97679015, 10.88758528 ,10.32327998 ,13.48275202]
MCAF2=[10.907790835043214, 17.971149661132873, 24.022881303239448, 29.180501150282907, 33.86805944164646, 38.256544177081395, 42.104706833302245, 45.751414537088856, 48.89448485978984, 51.65578561213704]
Greedy_cache_efficiency2= [10.03164832, 16.683952, 22.20698875, 27.29266928, 31.74376671, 35.75303115,
 39.51669465, 42.74836784, 45.91979108, 48.82235901]
TS_cache_efficiency2= [ 4.07262327, 8.61033389, 14.30827582, 18.85593484, 23.50494311, 28.71106137,
 31.01349251, 33.82888765, 37.80886651, 41.4338121]
random_cache_efficiency2= [ 1.10551514, 2.73767332, 2.79176771, 4.75097929, 5.91556302, 6.94833054,
  9.01697445, 9.17366163, 11.24603619, 11.92812286]
MCAF3= [10.96961778399367, 18.303552259497128, 24.423547597578256, 29.601958005925542, 34.203149248878994, 38.26699300098759, 42.1008078614674, 45.407703207522864, 48.69803647338106, 51.53567288051379]
Greedy_cache_efficiency3= [10.06281322, 16.97883121, 22.53050183, 27.68002061, 31.95757654, 35.87506057,
 39.61036173, 42.86603731, 46.00780258, 49.01026236]
TS_cache_efficiency3= [ 4.25032051,  9.29746109, 14.6175693,  18.26306717, 23.54453053, 26.41835815,
 30.42515473, 32.58190562, 37.81613637, 42.3572134 ]
random_cache_efficiency3= [ 1.16179926, 2.93087478, 3.25720911, 6.05436043, 6.56901173, 7.45784337,
  9.12509278, 9.36923011, 10.43411052, 12.01057519]
MCAF4= [10.819145763400194, 18.134284318266904, 24.10289927724299, 29.2897437036379, 33.949273752942744, 38.154463135585154, 41.919272039646934, 45.31603962155199, 48.34349677329289, 51.41727636730524]
Greedy_cache_efficiency4= [ 9.95767525, 16.68547062, 22.32874974, 27.22262058, 31.83785876, 35.76784207,
 39.24196179, 42.726044, 45.88206179, 48.77467622]
TS_cache_efficiency4= [ 3.04014823,  9.72200189, 14.18164743, 20.69851705, 23.2748063,  27.42478949,
 30.10958748, 33.5609267,  37.70900622, 39.79034336]
random_cache_efficiency4= [ 1.3078158, 2.56105996, 3.84857003, 4.67222113, 7.11842681, 8.09754364,
  7.90463922, 10.03864434, 11.07360192, 12.13013434]

normal_ce_round = [10.934227839656035, 18.027267616770757, 24.1461109360811, 29.387127263292502, 34.135176708241445, 38.37728645823681, 42.366117484262745, 45.827387460849906]


MCAF_avg=[]
Greedy_cache_efficiency_avg=[]
TS_cache_efficiency_avg=[]
random_cache_efficiency_avg=[]

for i in range(len(MCAF)):
    MCAF_avg.append((MCAF[i]+MCAF1[i]+MCAF2[i]+MCAF3[i]+MCAF4[i])*0.2)
MCAF_avg=[10.910345530316329, 18.023173923497605, 24.100738461127918, 29.368242383760027, 34.04107900356223, 38.21854488737962, 42.07300050696514, 45.60660331178448, 48.784117704328054, 51.66156691385939]
normal_ce_cs=[10.888800269182358, 18.143638697456478, 24.022656181847637, 29.14459828271625, 33.979287912964374, 38.261281357875454, 42.11831561631544, 45.59338509278068]
for i in range(len(Greedy_cache_efficiency)):
    Greedy_cache_efficiency_avg.append((Greedy_cache_efficiency[i]+Greedy_cache_efficiency1[i]
                     +Greedy_cache_efficiency2[i]+Greedy_cache_efficiency3[i]+Greedy_cache_efficiency4[i])*0.2)

for i in range(len(TS_cache_efficiency)):
    TS_cache_efficiency_avg.append((TS_cache_efficiency[i] + TS_cache_efficiency1[i]
                                        + TS_cache_efficiency2[i] + TS_cache_efficiency3[i] +
                                        TS_cache_efficiency4[i]) * 0.2)

for i in range(len(random_cache_efficiency)):
    random_cache_efficiency_avg.append((random_cache_efficiency[i] + random_cache_efficiency1[i]
                                        + random_cache_efficiency2[i] + random_cache_efficiency3[i] +
                                        random_cache_efficiency4[i]) * 0.2)

# plt cache hit ratio
plt.figure(figsize=(6.25, 5))
ax=plt.gca()
ax.yaxis.set_minor_locator(plt.MultipleLocator(5))
ax.grid(which="both",linestyle='--')
# 设置坐标轴范围、名称
plt.xlim(50, 500)
plt.ylim(0, 55)
plt.xlabel('Cache capacity',fontsize=15)
plt.ylabel('Cache efficiency',fontsize=15)
# MCAF
print('acaf',MCAF_avg)
plt.plot(cache_size, MCAF_avg, color='orangered', marker='^', linewidth=1.5, linestyle='-', label='EMCAF')
# m-ε-greedy
plt.plot(cache_size, Greedy_cache_efficiency_avg, color='olivedrab',  marker='*', linewidth=1.5, linestyle='-',label='N-ε-greedy')
# Thompson Sampling
plt.plot(cache_size, TS_cache_efficiency_avg, color='mediumorchid',   marker='x',linewidth=1.5, linestyle='-',
         label='Thompson Sampling')
# Random Caching
plt.plot(cache_size, random_cache_efficiency_avg, color='deeppink', linewidth=1.5, marker='v', linestyle='-', label='Random')
plt.legend(prop={'family' : 'Times New Roman', 'size' : 10})
plt.show()


#1m
cache_efficiency_list_vd=[7.5546719681908545, 8.34990059642147, 11.26573889993373, 11.928429423459244, 13.18754141815772, 13.58515573227303]
cache_efficiency_list_vd1= [7.422133863485753, 8.018555334658714, 10.868124585818423, 10.669317428760769, 13.717693836978132, 13.518886679920477]
cache_efficiency_list_vd2= [8.747514910536779, 9.145129224652088, 10.934393638170974, 12.060967528164348, 12.988734261100065, 13.916500994035786]
cache_efficiency_list_vd3=[7.620941020543406, 8.548707753479125, 11.663353214049039, 13.452617627567925, 14.579191517561298, 14.844267726971506]
cache_efficiency_list_vd4=[6.428098078197482, 7.687210072895957, 11.000662690523527, 11.133200795228628, 12.856196156394963, 13.518886679920477]

cache_efficiency_list_vd_avg=[]
for i in range(len(cache_efficiency_list_vd)):
    cache_efficiency_list_vd_avg.append((cache_efficiency_list_vd[i]+cache_efficiency_list_vd1[i]+cache_efficiency_list_vd2[i]
                                         +cache_efficiency_list_vd3[i]+cache_efficiency_list_vd4[i])*0.2)
plt.ylim(6,14)
plt.xlabel('Vehicle density',fontsize=15)
plt.ylabel('Cache efficiency',fontsize=15)
name_list=['2', '5', '10', '15', '20', '25']
ax=plt.gca()
ax.yaxis.set_minor_locator(plt.MultipleLocator(2))
ax.grid(which="both",linestyle='--',zorder=0)
plt.bar(np.arange(len(cache_efficiency_list_vd_avg)),cache_efficiency_list_vd_avg, width=0.6,color='royalblue',zorder=10,tick_label=name_list)
plt.plot(np.arange(len(cache_efficiency_list_vd_avg)),cache_efficiency_list_vd_avg, color='darkblue',zorder=10)
plt.show()


#1m
Cache_hit_radio=[0, 10.949039541779472, 10.966387586240762, 10.982499232422475, 11.030360368108713, 11.000404426633333, 10.984736945425992, 10.975908484083922, 11.020520842918929, 10.977040800653695, 10.94835842153083, 10.934457147420735, 11.02116908283661, 11.02648072512296, 10.953003331922021, 10.992792516485201, 10.997809641259733, 11.031242716779314, 11.10375478927203, 11.031936654974784, 11.026152006622315, 10.96644352953448, 10.973454585619086, 10.948059115717177, 10.942465551724561, 10.975138240221922, 10.993662693324662, 10.95922334860388, 10.99857679189262, 11.065659229457726, 10.996331693432628]
each_epoch_time=[0, 2.468569040298462, 4.952940940856934, 7.70296049118042, 10.785656452178955, 13.676337718963623, 16.693012237548828, 19.75554633140564, 23.083583116531372, 26.36437463760376, 29.68511986732483, 32.126919746398926, 34.62371563911438, 37.404911518096924, 40.53827381134033, 43.444698333740234, 46.48271703720093, 49.576457500457764, 52.92841601371765, 56.225170850753784, 59.53636908531189, 61.95827341079712, 64.42532682418823, 67.15911221504211, 70.26651167869568, 73.1560447216034, 76.18025660514832, 79.27116537094116, 82.6308126449585, 85.92758846282959, 89.26053500175476]
each_epoch_time=[2.468569040298462, 2.4843719005584717, 2.7500195503234863, 3.082695960998535, 2.890681266784668, 3.016674518585205, 3.0625340938568115, 3.3280367851257324, 3.2807915210723877, 3.3207452297210693, 2.4417998790740967, 2.496795892715454, 2.781195878982544, 3.133362293243408, 2.9064245223999023, 3.0380187034606934, 3.093740463256836, 3.3519585132598877, 3.296754837036133, 3.3111982345581055, 2.4219043254852295, 2.4670534133911133, 2.733785390853882, 3.1073994636535645, 2.889533042907715, 3.024211883544922, 3.0909087657928467, 3.359647274017334, 3.2967758178710938, 3.332946538925171]

Cache_hit_radio1= [0, 10.784898192478597, 10.808615884383247, 10.874382871846644, 10.832099387430342, 10.828319368055812, 10.908431171163414, 10.876194223462726, 10.896551724137932, 10.85247474809611, 10.867452986827702, 10.858222271446326, 10.892471597025299, 10.840874115112342, 10.853802034240795, 10.940491949635193, 10.859340808363486, 10.84229059702779, 10.76176057898235, 10.88013989630925, 10.813290476718267, 10.798544182580688, 10.78615558033102, 10.883155437574295, 10.872903741016032, 10.860171369478506, 10.930805220389066, 10.75809964439085, 10.791017127524048, 10.823148193780494, 10.853065994218587]
each_epoch_time1= [0, 2.439377546310425, 4.904647588729858, 7.4110023975372314, 10.190602779388428, 13.095958471298218, 16.077590465545654, 19.10805106163025, 22.73210597038269, 26.215285539627075, 29.743693113327026, 32.16406583786011, 34.636723041534424, 37.12011694908142, 39.90452742576599, 42.82672691345215, 45.79411482810974, 48.86170172691345, 52.47092866897583, 55.94985055923462, 59.54553937911987, 61.98666715621948, 64.47138285636902, 66.96974515914917, 69.81719255447388, 72.72219896316528, 75.69108176231384, 78.7675929069519, 82.37632989883423, 85.89091444015503, 89.57792592048645]
each_epoch_time1= [2.439377546310425, 2.4652700424194336, 2.506354808807373, 2.7796003818511963, 2.90535569190979, 2.9816319942474365, 3.0304605960845947, 3.6240549087524414, 3.4831795692443848, 3.528407573699951, 2.420372724533081, 2.4726572036743164, 2.483393907546997, 2.7844104766845703, 2.9221994876861572, 2.9673879146575928, 3.067586898803711, 3.609226942062378, 3.478921890258789, 3.595688819885254, 2.4411277770996094, 2.484715700149536, 2.4983623027801514, 2.847447395324707, 2.9050064086914062, 2.9688827991485596, 3.0765111446380615, 3.608736991882324, 3.514584541320801, 3.687011480331421]

Cache_hit_radio2= [0, 10.670089480375118, 10.788498810137142, 10.857370811341598, 10.83765615887535, 10.867830485169907, 10.834192946261911, 10.724529089870595, 10.832305454813234, 10.849027667014294, 10.856486175894004, 10.767009675933037, 10.742239056102248, 10.747107397455245, 10.766944442738623, 10.81737849779087, 10.840782516527076, 10.834927877539005, 10.7880638003114, 10.782570303781013, 10.81223725797048, 10.81192252202474, 10.857135838558523, 10.86682761120223, 10.767107321412139, 10.843780312611274, 10.814656705798647, 10.778623143944042, 10.862882492621658, 10.807452652039391, 10.807025303625071]
each_epoch_time2= [0, 2.499994993209839, 5.078037977218628, 7.624953746795654, 10.124596357345581, 12.874428510665894, 15.905644416809082, 19.468172073364258, 23.124132871627808, 26.624073028564453, 30.249030113220215, 32.71800947189331, 35.296104431152344, 37.82767963409424, 40.40600609779358, 43.202924489974976, 46.21901345252991, 49.62513041496277, 53.32823371887207, 56.96906328201294, 60.61002826690674, 63.203641414642334, 65.70351576805115, 68.37539768218994, 70.95377922058105, 73.81292653083801, 76.84394407272339, 80.29703140258789, 84.01559114456177, 87.5465247631073, 91.17157936096191]
each_epoch_time2=[2.499994993209839, 2.578042984008789, 2.5469157695770264, 2.4996426105499268, 2.7498321533203125, 3.0312159061431885, 3.562527656555176, 3.65596079826355, 3.4999401569366455, 3.6249570846557617, 2.4689793586730957, 2.578094959259033, 2.5315752029418945, 2.578326463699341, 2.7969183921813965, 3.0160889625549316, 3.4061169624328613, 3.7031033039093018, 3.640829563140869, 3.640964984893799, 2.5936131477355957, 2.4998743534088135, 2.671881914138794, 2.5783815383911133, 2.859147310256958, 3.031017541885376, 3.453087329864502, 3.718559741973877, 3.5309336185455322, 3.6250545978546143]

Cache_hit_radio3=[0, 10.852044293547923, 10.817441591197841, 10.937070108301443, 11.067974518151754, 10.998611649635402, 11.089242957967182, 11.011832135102836, 11.027215867470558, 11.055981556658146, 11.048038210507888, 10.958423630510215, 11.093125537214453, 11.065620023323762, 10.966377616777406, 11.115219039622016, 10.989107189755005, 11.042503409531674, 10.982445372730517, 11.002952805164906, 11.075392125530302, 11.069182389937108, 11.014953786038124, 11.006389676385734, 10.958518249591567, 10.983542860007772, 10.923948777356836, 10.786977185718122, 11.007754851480186, 10.99735426515028, 11.08196762360247]
each_epoch_time3=[0, 2.296898365020752, 4.608906030654907, 7.437161207199097, 10.39030385017395, 13.110236406326294, 16.15688967704773, 19.295526027679443, 22.701283931732178, 25.95575761795044, 29.283050537109375, 31.546011209487915, 33.85852289199829, 36.717923164367676, 39.54775810241699, 42.237372159957886, 45.28423595428467, 48.41185903549194, 51.78356695175171, 55.12888026237488, 58.472713470458984, 60.74544143676758, 63.043654441833496, 65.85795402526855, 68.7334349155426, 71.4553759098053, 74.54745888710022, 77.68499422073364, 81.05566596984863, 84.43029594421387, 87.79891204833984]
each_epoch_time3=[2.296898365020752, 2.3120076656341553, 2.8282551765441895, 2.9531426429748535, 2.7199325561523438, 3.0466532707214355, 3.138636350631714, 3.4057579040527344, 3.2544736862182617, 3.3272929191589355, 2.26296067237854, 2.312511682510376, 2.8594002723693848, 2.8298349380493164, 2.6896140575408936, 3.0468637943267822, 3.1276230812072754, 3.3717079162597656, 3.345313310623169, 3.3438332080841064, 2.2727279663085938, 2.298213005065918, 2.8142995834350586, 2.875480890274048, 2.7219409942626953, 3.092082977294922, 3.137535333633423, 3.3706717491149902, 3.3746299743652344, 3.3686161041259766]

Cache_hit_radio4=[0, 10.972772277227723, 10.868518518518519, 11.032261249475477, 10.91998024203507, 10.971538784896516, 10.953366914923206, 11.040356750213087, 11.02930722202647, 11.05139131994483, 11.004169884169885, 11.008612747856088, 11.010266054197366, 10.897067812621557, 11.032136152554095, 10.949486713856873, 10.99414699199842, 10.930110352075669, 11.013786509576535, 11.025899307250693, 10.884824518042512, 11.030613188642599, 10.960740228294707, 10.979691207741379, 11.005528680027643, 10.937297437448684, 10.988224257535736, 11.047824016524736, 11.000543236703047, 11.038520382982924, 10.998624246574497]
each_epoch_time4= [0, 2.3906567096710205, 4.827629327774048, 7.565184593200684, 10.326264142990112, 13.18783187866211, 16.125136375427246, 19.422080516815186, 22.750190258026123, 26.19056463241577, 29.705177783966064, 32.066442251205444, 34.48883938789368, 37.20806860923767, 39.97300982475281, 42.84730362892151, 45.80260252952576, 49.118399143218994, 52.41485047340393, 55.89926719665527, 59.48840093612671, 61.910834550857544, 64.35073685646057, 67.10121536254883, 69.86867117881775, 72.72109031677246, 75.69026684761047, 78.98752927780151, 82.25345849990845, 85.74006628990173, 89.27057123184204]
each_epoch_time4=[2.3906567096710205, 2.4369726181030273, 2.7375552654266357, 2.7610795497894287, 2.861567735671997, 2.9373044967651367, 3.2969441413879395, 3.3281097412109375, 3.4403743743896484, 3.514613151550293, 2.36126446723938, 2.4223971366882324, 2.719229221343994, 2.7649412155151367, 2.874293804168701, 2.955298900604248, 3.3157966136932373, 3.2964513301849365, 3.4844167232513428, 3.5891337394714355, 2.422433614730835, 2.4399023056030273, 2.750478506088257, 2.767455816268921, 2.852419137954712, 2.9691765308380127, 3.29726243019104, 3.2659292221069336, 3.486607789993286, 3.5305049419403076]

Cache_hit_radio_avg=[]
for i in range(len(Cache_hit_radio)):
    Cache_hit_radio_avg.append((Cache_hit_radio[i]+Cache_hit_radio1[i]+Cache_hit_radio2[i]+
                                Cache_hit_radio3[i]+Cache_hit_radio4[i])*0.2)
print(Cache_hit_radio_avg)
each_epoch_time_avg = []
for i in range(len(each_epoch_time)):
    each_epoch_time_avg.append((each_epoch_time[i] + each_epoch_time1[i] + each_epoch_time2[i] +
                                each_epoch_time3[i] + each_epoch_time4[i]) * 0.2)

fig,ax1=plt.subplots()
ax2=ax1.twinx()
plt.gcf().set_facecolor('white')
ax1.xaxis.set_minor_locator(plt.MultipleLocator(2))
ax1.grid(ls='--')
ax1.plot(range(31),Cache_hit_radio_avg, color='royalblue', linewidth=1.5, linestyle='-')
ax1.scatter(range(31), Cache_hit_radio_avg, s=10, marker='o', color='royalblue')
ax1.set_xlabel('Communication round',fontsize=15)
ax1.set_ylabel('Cache efficiency',color='royalblue',fontsize=15)
"-------------------------------------------"
"坐标轴范围"
ax1.set_xlim(0, 30)
ax1.set_ylim(0, 12)
"-------------------------------------------"
ax2.plot(range(1,31), each_epoch_time_avg, color='tomato', linewidth=1.5, linestyle='-')
ax2.scatter(range(1,31), each_epoch_time_avg, s=10, marker='*', color='tomato')
ax2.set_ylabel('Training times(s)', color='tomato',fontsize=15)
y1_major_locator = MultipleLocator(2)

"-------------------------------------------"
"坐标轴范围"
ax2.set_ylim(0,6)
"-------------------------------------------"
ax1.yaxis.set_major_locator(y1_major_locator)
plt.show()

#1m
Cache_hit_radio_avg= [10.777365560252917, 10.86723372781065, 10.772633187127298, 10.783244279278446, 10.869578619647976, 10.811842421182888, 10.75722746405527, 10.821122851498798, 10.847146847811374, 10.783625730994153, 10.89486985555904, 10.887488771027405, 10.771813938040852, 10.674669690396371, 10.844033534821309, 10.778059258985312, 10.652119032812221, 10.75045714531988, 10.934512575707114, 10.90226258273049, 10.869057137585338, 10.816911457180112, 10.79961987510182, 10.741602926504822, 10.783124742210923, 10.764087693700017, 10.902105178900184, 10.693844392747682, 10.812008419186883, 10.854831859060775]
Cache_hit_radio_avg1=[10.91562884779133, 10.835489177965739, 10.897231553909908, 10.88881540270429, 10.95167873117661, 10.85481599412161, 10.872098729083861, 10.91178396773226, 10.883244998621366, 10.938198291958738, 10.975213701400166, 10.886521129090564, 10.874633606050779, 10.915831724729602, 10.958501652589057, 10.924112419693657, 10.919818105036386, 10.937174507088852, 10.846758397806287, 10.85299788816454, 10.912352231752037, 10.815904446048977, 10.889415568906282, 10.934849050941096, 10.884615855075655, 10.824246213444647, 10.883512500918286, 10.904589438591977, 10.939472297454627, 10.925595621180637]
Cache_hit_radio_avg2=[11.025912867674252, 11.062447714187295, 11.024557859993104, 11.193768328896486, 11.061832268252363, 11.046758800007392, 11.077779762601406, 11.059873833327185, 10.960135447129444, 11.094629030073985, 10.979510090895085, 11.025443805187214, 11.147496500218928, 11.04493240121955, 11.118276399995086, 10.975069252077564, 11.000836799488075, 11.035672478590351, 11.104259294660311, 11.009360758714127, 10.964817878249319, 11.08696591617639, 11.06776041698718, 11.134338482409891, 10.971170960331586, 11.069097817639003, 11.097367352213567, 10.995909415736428, 11.067593489215511, 11.060579952737298]
Cache_hit_radio_avg3=[0, 10.76495357038456, 10.694296913338675, 10.707090805083693, 10.736200129179709, 10.893097098492012, 10.704094003543785, 10.766833459566174, 10.809433235122267, 10.76796735018913, 10.768254915861348, 10.712288941071229, 10.660141529966296, 10.689657312750994, 10.748241790357985, 10.873143552825278, 10.746654889056154, 10.654758943231005, 10.634257500949488, 10.734607165929532, 10.722141445774149, 10.709955794853302, 10.647566962898516, 10.78120442146683, 10.79666457633538, 10.760532895473373, 10.68300354960432, 10.67496617721896, 10.756400623451462, 10.740145559685054, 10.796369901783326]
Cache_hit_radio_avg4=[0, 10.870314978898984, 10.910609228528195, 10.906270021733395, 10.937049435187623, 10.93255860649566, 10.873844842070945, 10.915155200842618, 10.774575463415857, 10.86187727309845, 10.908086249984303, 10.84093847679542, 10.945332940150456, 10.934238652080976, 10.838399618538526, 10.96252487773027, 10.924991380120993, 10.863093368840207, 10.807062898448873, 10.853652411922758, 10.893009591723999, 10.980288730227505, 10.960376006937027, 10.94400421284919, 10.83989402443465, 10.912788070492544, 10.820452589861636, 10.73756518251103, 10.856813034449443, 10.907151150020395, 10.846012855277694]

Cache_hit_radio_asy=[ 10.845768757081766, 10.849892478095503, 10.936716854677528, 10.937614134920246, 10.933340942878196, 10.953994187148341, 10.925764136546633, 10.961180222273427, 10.957183218473416, 10.944901135786063, 10.905345094633283, 10.951854265475196, 10.915430014727173, 10.91445271564659, 10.963073743478033, 10.936237429580745, 10.936214990590692, 10.929962210174565, 10.944699793496131, 10.922379276976777, 10.935341162543923, 10.918488003768292, 10.936824609724164, 10.90930470875439, 10.919986043953633, 10.930259530880988, 10.866149467836326, 10.932154900044312, 10.946426944682162, 10.94740297229065]

Cache_hit_radio_normal1=[10.805029063193345, 10.76679070334899, 10.841922507916713, 10.898829737851507, 10.908115227943508, 10.940285749175723, 10.918109590884347, 10.981900314379025, 10.913264029202962, 10.930515553435697, 10.926766119330985, 10.86365972443161, 10.918326231089512, 10.864150805181486, 10.965566118429091, 10.972442075798043, 10.876371240934828, 10.886069764174856, 10.903723804110669, 10.874494966473721, 10.778801730670512, 10.864263930228152, 10.906278279159636, 11.007407950711457, 10.869565217391305, 10.822494962447335, 10.885824007424096, 10.915798346017127, 10.89315296260751, 10.907125451180857]
Cache_hit_radio_normal2=[10.82593078005922, 10.853900088707423, 10.819335391496706, 10.828621232090473, 10.892297602565035, 10.896832958110576, 10.932106568136517, 10.908594153182964, 10.908660240876046, 10.907611401921372, 10.851450486534453, 10.886844582080943, 10.961175248841574, 10.940816562361256, 10.904529938410331, 10.92998688620137, 10.881974301051763, 10.892123745413011, 10.963846639778414, 10.91348812337832, 10.841006677938475, 10.834113086485765, 10.796006607073455, 10.892876682350366, 10.880920384547561, 10.952464927909904, 10.953175735137924, 10.916259994401917, 10.935479758891336, 10.922883349441092]
Cache_hit_radio_normal3=[10.773981087794219, 10.792915803399815, 10.767773338900973, 10.737435181491822, 10.719118078028645, 10.721775602936036, 10.779182703404052, 10.806940648366632, 10.892081939747253, 10.736443050524072, 10.805735106940526, 10.784618638269286, 10.81999937618914, 10.854031559733619, 10.96280631919393, 10.90058333593287, 10.924809733658288, 10.902028646303432, 10.80115517713546, 10.92146342375353, 10.810423558288324, 10.767016783164506, 10.813390562223942, 10.793492488935986, 10.857160655329222, 10.819236692625685, 10.91829041082233, 10.890175140961029, 10.887741951550545, 10.859849783401378]
Cache_hit_radio_normal4=[10.860677749764626, 10.809493979258022, 10.82749816729442, 10.841468966563813, 10.98754504646899, 10.88829565151381, 10.872755797917431, 10.927707262159991, 10.938881730210465, 10.929220885971901, 10.994231207145207, 10.959302325581396, 11.018943851789984, 10.956398458218091, 10.943171900889165, 11.012739819519224, 10.907227841135505, 10.973734663789775, 10.862714636657005, 10.939387996533204, 10.98156130722926, 10.959025358630848, 10.945226501960933, 10.924608999342006, 10.925380694589547, 10.92533543804262, 10.971380109112543, 10.880262092693787, 10.890086165962861, 10.915025238149454]
Cache_hit_radio_normal5=[10.735480224600376, 10.82381533967116, 10.785554545231133, 10.79117264403368, 10.841724808698908, 10.82931201728859, 10.78861908627943, 10.8909494548086, 10.928566170155333, 10.890827710273774, 10.93141015804818, 10.82169495687406, 10.80195394962934, 10.876618398375928, 10.884107645424947, 10.837756155093617, 10.861992837168229, 10.898131626227135, 10.888169413846278, 10.874585431765139, 10.859192935115908, 10.837187930770408, 10.895846629682362, 10.85978957700684, 10.877907048020694, 10.894173340364734, 10.9003140487757, 10.773285495751752, 10.837541183760866, 10.809399156927086]


cache_hit_radio_normal=[]
for i in range(len(Cache_hit_radio_normal1)):
    cache_hit_radio_normal.append(0.2*(Cache_hit_radio_normal1[i]+Cache_hit_radio_normal2[i]
                            +Cache_hit_radio_normal3[i]+Cache_hit_radio_normal4[i]+Cache_hit_radio_normal5[i]))
cache_hit_radio_normal=[10.800219781082356, 10.809383182877083, 10.80841679016799, 10.819505552406259, 10.869760152741016, 10.855300395804946, 10.858154749324356, 10.903218366579443, 10.916290822038414, 10.878923720425364, 10.90191861559987, 10.86322404544746, 10.90407973150791, 10.898403156774078, 10.932036384469493, 10.930701654509026, 10.890475190789724, 10.910417689181642, 10.883921934305565, 10.904683988380784, 10.854197241848496, 10.852321417855936, 10.871349716020065, 10.895635139669333, 10.882186799975667, 10.882741072278055, 10.925796862254519, 10.875156213965122, 10.888800404554624, 10.882856595819973]

plt.ylim(10.6,11.1)
plt.xlim(0,30)

plt.xlabel('Communication rounds',fontsize=15)
plt.ylabel('Cache efficiency',fontsize=15)
ax=plt.gca()
ax.yaxis.set_minor_locator(plt.MultipleLocator(2.5))
ax.grid(which="both",linestyle='--',zorder=0)
plt.plot(range(1,31), Cache_hit_radio_avg, color='royalblue', linewidth=1.5, linestyle='-', marker='*',label='FedAVG')
plt.plot(range(1,31), Cache_hit_radio_asy, color='tomato', linewidth=1.5, linestyle='-', marker='o',label='EMCAF')
plt.plot(range(1,31), cache_hit_radio_normal, color='olivedrab', linewidth=1.5, linestyle='-', marker='v',label='ECAF')
plt.legend(prop={'family' : 'Times New Roman', 'size' : 10})
plt.show()

